<div class="contenedor-dashboard">
  <div class="encabezado">
    <div>
      <h1>ğŸ“Š Tablero de EstadÃ­sticas</h1>
      <p>Resumen del dÃ­a actual</p>
    </div>
    <button class="boton-recargar" (click)="recargar()" [disabled]="cargando">
      ğŸ”„ Actualizar
    </button>
  </div>

  <div *ngIf="cargando" class="loading">
    <div class="spinner"></div>
    <p>Cargando estadÃ­sticas...</p>
  </div>

  <div *ngIf="!cargando" class="contenido-dashboard">
    
    <div class="grid-tarjetas">
      <div class="tarjeta tarjeta-ventas">
        <div class="tarjeta-contenido">
          <div class="icono">ğŸ’°</div>
          <div class="info">
            <h3>Ventas del DÃ­a</h3>
            <p class="numero">{{ totalVentasHoy | moneda }}</p>
            <span class="descripcion">{{ cantidadPedidosHoy }} pedido(s)</span>
          </div>
        </div>
      </div>

      <div class="tarjeta tarjeta-pendientes">
        <div class="tarjeta-contenido">
          <div class="icono">â³</div>
          <div class="info">
            <h3>En Proceso</h3>
            <p class="numero">{{ pedidosPendientes }}</p>
            <span class="descripcion">Pendientes</span>
          </div>
        </div>
      </div>

      <div class="tarjeta tarjeta-entregados">
        <div class="tarjeta-contenido">
          <div class="icono">âœ…</div>
          <div class="info">
            <h3>Completados</h3>
            <p class="numero">{{ pedidosEntregados }}</p>
            <span class="descripcion">Entregados</span>
          </div>
        </div>
      </div>

      <div class="tarjeta tarjeta-platos">
        <div class="tarjeta-contenido">
          <div class="icono">ğŸ½ï¸</div>
          <div class="info">
            <h3>Platos Vendidos</h3>
            <p class="numero">{{ platosVendidosHoy }}</p>
            <span class="descripcion">Total del dÃ­a</span>
          </div>
        </div>
      </div>
    </div>

    <div class="grid-graficos">
      
      <div class="panel-grafico">
        <h2>ğŸ† Top 5 - Platos MÃ¡s Vendidos</h2>
        
        <div *ngIf="platosMasVendidos.length > 0" class="lista-platos">
          <div *ngFor="let plato of platosMasVendidos; let i = index" class="item-plato">
            <div class="ranking" [class.top1]="i === 0" [class.top2]="i === 1" [class.top3]="i === 2">
              {{ i + 1 }}
            </div>
            <div class="info-plato">
              <h4>{{ plato.nombre }}</h4>
              <p>{{ plato.cantidad }} unidades</p>
            </div>
            <div class="barra-container">
              <div class="barra" [style.width.%]="(plato.cantidad / platosMasVendidos[0].cantidad) * 100"></div>
            </div>
            <div class="total-plato">{{ plato.total | moneda }}</div>
          </div>
        </div>

        <div *ngIf="platosMasVendidos.length === 0" class="sin-datos">
          <p>ğŸ“Š AÃºn no hay datos de ventas</p>
        </div>
      </div>

      <div class="panel-grafico">
        <h2>ğŸ“ˆ DistribuciÃ³n de Pedidos</h2>
        
        <div *ngIf="pedidosPorEstado.length > 0" class="grafico-circular">
          <svg viewBox="0 0 200 200" class="donut-chart">
            <circle cx="100" cy="100" r="80" fill="none" stroke="#ecf0f1" stroke-width="40"/>
            <circle 
              *ngFor="let item of pedidosPorEstado; let i = index"
              cx="100" 
              cy="100" 
              r="80" 
              fill="none" 
              [attr.stroke]="obtenerColorEstado(item.estado)"
              stroke-width="40"
              [attr.stroke-dasharray]="calcularDashArray(item.porcentaje)"
              [attr.stroke-dashoffset]="calcularDashOffset(i)"
              [attr.transform]="'rotate(-90 100 100)'"
            />
          </svg>
          
          <div class="leyenda-circular">
            <div *ngFor="let item of pedidosPorEstado" class="leyenda-item">
              <span class="indicador" [style.background-color]="obtenerColorEstado(item.estado)"></span>
              <span class="texto">{{ item.estado }}: {{ item.cantidad }} ({{ item.porcentaje }}%)</span>
            </div>
          </div>
        </div>

        <div *ngIf="pedidosPorEstado.length === 0" class="sin-datos">
          <p>ğŸ“Š AÃºn no hay pedidos</p>
        </div>
      </div>
    </div>
  </div>
</div>