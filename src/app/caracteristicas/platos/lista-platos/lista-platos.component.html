<div class="contenedor-platos">
  <!-- Encabezado -->
  <div class="encabezado">
    <div>
      <h1>ğŸ• MenÃº de Platos</h1>
      <p>{{ platosFiltrados.length }} plato(s) encontrado(s)</p>
    </div>
    <button 
      *ngIf="esAdmin" 
      class="boton-agregar"
      (click)="agregarPlato()"
    >
      â• Agregar Plato
    </button>
  </div>

  <!-- Filtros -->
  <div class="panel-filtros">
    <!-- BÃºsqueda por texto -->
    <div class="filtro">
      <label>ğŸ” Buscar:</label>
      <input 
        type="text" 
        [(ngModel)]="textoBusqueda"
        (ngModelChange)="aplicarFiltros()"
        placeholder="Buscar por nombre o descripciÃ³n..."
      />
    </div>

    <!-- Filtro por categorÃ­a -->
    <div class="filtro">
      <label>ğŸ·ï¸ CategorÃ­a:</label>
      <select 
        [(ngModel)]="categoriaSeleccionada"
        (ngModelChange)="aplicarFiltros()"
      >
        <option *ngFor="let cat of categorias" [value]="cat === 'Todas' ? '' : cat">
          {{ cat }}
        </option>
      </select>
    </div>

    <!-- Filtro solo disponibles -->
    <div class="filtro-checkbox">
      <input 
        type="checkbox" 
        id="soloDisponibles"
        [(ngModel)]="soloDisponibles"
        (ngModelChange)="aplicarFiltros()"
      />
      <label for="soloDisponibles">Solo disponibles</label>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="cargando" class="loading">
    <div class="spinner"></div>
    <p>Cargando platos...</p>
  </div>

  <!-- Lista de platos -->
  <div *ngIf="!cargando && platosFiltrados.length > 0" class="grid-platos">
    <div *ngFor="let plato of platosFiltrados" class="tarjeta-plato">
      <!-- Badge de disponibilidad -->
      <div class="badge-disponibilidad" [class.no-disponible]="!plato.disponible">
        {{ plato.disponible ? 'âœ“ Disponible' : 'âœ— No disponible' }}
      </div>

      <!-- Imagen -->
      <div class="imagen-plato">
        <img 
          [src]="plato.imagenUrl || 'https://via.placeholder.com/300x200?text=Sin+Imagen'" 
          [alt]="plato.nombre"
        />
      </div>

      <!-- Contenido -->
      <div class="contenido-plato">
        <span class="categoria">{{ plato.categoria }}</span>
        <h3>{{ plato.nombre }}</h3>
        <p>{{ plato.descripcion }}</p>
        
        <div class="precio">
          {{ plato.precio | moneda }}
        </div>

        <!-- Acciones (solo admin) -->
        <div *ngIf="esAdmin" class="acciones">
          <button 
            class="boton-editar"
            (click)="editarPlato(plato.id!)"
          >
            âœï¸ Editar
          </button>
          
          <button 
            class="boton-toggle"
            [class.activar]="!plato.disponible"
            (click)="toggleDisponibilidad(plato)"
          >
            {{ plato.disponible ? 'ğŸš« Desactivar' : 'âœ“ Activar' }}
          </button>
          
          <button 
            class="boton-eliminar"
            (click)="eliminarPlato(plato)"
          >
            ğŸ—‘ï¸ Eliminar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Sin resultados -->
  <div *ngIf="!cargando && platosFiltrados.length === 0" class="sin-resultados">
    <h3>ğŸ” No se encontraron platos</h3>
    <p>Intenta con otros filtros o agrega nuevos platos al menÃº</p>
  </div>
</div>